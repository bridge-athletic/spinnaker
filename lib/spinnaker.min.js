!function(){var a,b=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a=function(){function a(){this.subscriptions=["create","destroy","update"],this.defaultActions={get:{method:"GET",subscribe:["update"]},save:{method:"POST"},query:{method:"GET",isArray:!0,subscribe:["create","destroy","update"]},remove:{method:"DELETE"},"delete":{method:"DELETE"},update:{method:"PUT"}}}return a.prototype.setUrl=function(a){this.url=a},a.prototype.setMock=function(a){this.mock=a},a.prototype.setSubscriptions=function(a){this.subscriptions=a},a.prototype.setDefaultActions=function(a){this.defaultActions=a},a.prototype.$get=function(a){var b;return b=["$window","$rootScope","$parse","$q"],this.mock&&b.push("spinnakerMock"),b.push(this.service.bind(this)),a.invoke(b)},a.prototype.service=function(a,c,d,e,f){var g,h,i,j,k,l,m,n=this;return i=null!=(k=null!=(l=this.url)?l:null!=(m=a.location)?m.origin:void 0)?k:"http://localhost:1337",j=null!=f?f:a.io.connect(i),g=function(a){var b,d,f,g,h,i,k,l,m;return f=e.defer(),h=null!=(i=null!=a?a.url:void 0)?i:"/",d=null!=(k=null!=a?a.data:void 0)?k:{},b=function(a){return c.$apply(function(){return f.resolve({data:a})})},g=null!=(l=null!=a?null!=(m=a.method)?m.toLowerCase():void 0:void 0)?l:"get",j.request(h,d,b,g),f.promise},h=angular.module("ngResource")._invokeQueue[0][2]["1"][3](g,d,e),function(a,d,e,f){var g,i,k,l;null==d&&(d="/"+a+"/:id"),null==e&&(e={id:"@id"}),g=null,f=angular.extend({},n.defaultActions,f),k=function(d,e){return{response:function(d){var f,h;return null==e.subscribe?d.resource:(h=e.subscribe,f=b.call(n.subscriptions,h)>=0?[].concat(e.subscribe):e.subscribe,j.on("message",function(h){var i,j;return angular.isFunction(f)?f(d.resource,h):h.model===a&&(j=h.verb,b.call(f,j)>=0)?(i=null,i=e.isArray?function(){switch(h.verb){case"create":return function(){return d.resource.push(new g(h.data))};case"destroy":return function(){var a,b,c,e,f,g,i,j,k;for(c=[],j=d.resource,a=e=0,g=j.length;g>e;a=++e)b=j[a],b.id===h.id&&c.push(a);for(k=[],f=0,i=c.length;i>f;f++)a=c[f],k.push(d.resource.splice(a,1));return k};case"update":return function(){var a,b,c,e,f;for(e=d.resource,f=[],b=0,c=e.length;c>b;b++)a=e[b],a.id===h.data.id&&f.push(angular.copy(h.data,a));return f}}}():function(){switch(h.verb){case"update":return function(){return h.data.id===d.resource.id?angular.copy(h.data,d.resource):void 0}}}(),null!=i?c.$apply(i):void 0):null}),d.resource)}}};for(l in f)i=f[l],i.interceptor=k(l,i);return g=h(d,e,f)}},a}(),angular.module("spinnaker",["ngResource"]).provider("spinnaker",a)}.call(this);